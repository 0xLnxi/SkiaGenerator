# Skia + Dawn WebGPU å…¨å¹³å°æ„å»ºå·¥ä½œæµ
name: ç¼–è¯‘ Skia + Dawn å…¨å¹³å°æ„å»ºåŒ…

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘
  schedule:
    # æ¯å¤©åŒ—äº¬æ—¶é—´ä¸Šåˆ8ç‚¹ï¼ˆUTCæ—¶é—´0ç‚¹ï¼‰æ‰§è¡Œä¸€æ¬¡
    - cron: '0 0 * * *'

# è®¾ç½®å·¥ä½œæµæƒé™
permissions:
  contents: write
  packages: write
  actions: read

jobs:
  build-skia-dawn:
    runs-on: ${{ matrix.os }}
    strategy:
      fail-fast: false
      matrix:
        include:
          # Windows x64æ¶æ„
          - os: windows-latest
            platform: Win
            arch: x64
            target_os: win
            target_cpu: x64
            dawn_backends: "d3d11,d3d12,vulkan"
            
          # macOS x64æ¶æ„
          - os: macos-latest
            platform: Mac
            arch: x64
            target_os: mac
            target_cpu: x64
            dawn_backends: "metal"
            
          # macOS ARM64æ¶æ„
          - os: macos-latest
            platform: Mac
            arch: arm64
            target_os: mac
            target_cpu: arm64
            dawn_backends: "metal"
            
          # Linux x64æ¶æ„
          - os: ubuntu-latest
            platform: Linux
            arch: x64
            target_os: linux
            target_cpu: x64
            dawn_backends: "vulkan,opengl"
            
          # Android x64æ¶æ„
          - os: ubuntu-latest
            platform: Android
            arch: x64
            target_os: android
            target_cpu: x64
            android_api: 21
            dawn_backends: "vulkan,opengl"
            
          # Android ARM64æ¶æ„
          - os: ubuntu-latest
            platform: Android
            arch: arm64
            target_os: android
            target_cpu: arm64
            android_api: 21
            dawn_backends: "vulkan,opengl"

    steps:
    # æ£€å‡ºä»£ç ä»“åº“
    - name: æ£€å‡ºä»£ç ä»“åº“
      uses: actions/checkout@v4
      
    # è®¾ç½®Pythonè¿è¡Œç¯å¢ƒ
    - name: è®¾ç½®Pythonç¯å¢ƒ
      uses: actions/setup-python@v4
      with:
        python-version: '3.x'
        
    # å®‰è£…Linuxç³»ç»Ÿä¾èµ–åŒ…
    - name: å®‰è£…Linuxç³»ç»Ÿä¾èµ–
      if: runner.os == 'Linux'
      run: |
        sudo apt-get update
        # å®‰è£…åŸºç¡€æ„å»ºå·¥å…·
        sudo apt-get install -y build-essential ninja-build
        # å®‰è£…å›¾å½¢å’Œå­—ä½“ç›¸å…³ä¾èµ–
        sudo apt-get install -y libfontconfig1-dev libfreetype6-dev libgl1-mesa-dev
        # å®‰è£…Vulkanå¼€å‘åº“
        sudo apt-get install -y libvulkan-dev vulkan-tools
        # å®‰è£…X11ç›¸å…³åº“
        sudo apt-get install -y libxrandr-dev libxinerama-dev libxcursor-dev libxi-dev
        # å®‰è£…ICUå’ŒHarfBuzz
        sudo apt-get install -y libicu-dev libharfbuzz-dev
        # å®‰è£…Javaå¼€å‘ç¯å¢ƒï¼ˆAndroidæ„å»ºéœ€è¦ï¼‰
        sudo apt-get install -y openjdk-11-jdk
        # å®‰è£…Waylandæ”¯æŒåº“
        sudo apt-get install -y libwayland-dev libxkbcommon-dev
        
    # å®‰è£…macOSç³»ç»Ÿä¾èµ–
    - name: å®‰è£…macOSç³»ç»Ÿä¾èµ–
      if: runner.os == 'macOS'
      run: |
        # å®‰è£…Xcodeå‘½ä»¤è¡Œå·¥å…·
        xcode-select --install 2>/dev/null || true
        # å®‰è£…ninjaæ„å»ºå·¥å…·
        brew install ninja || true
        # éªŒè¯Xcodeç‰ˆæœ¬
        xcodebuild -version
        
    # å®‰è£…Windowsç³»ç»Ÿä¾èµ–
    - name: å®‰è£…Windowsç³»ç»Ÿä¾èµ–
      if: runner.os == 'Windows'
      run: |
        # å®‰è£…ninjaæ„å»ºå·¥å…·
        choco install ninja -y
        
    # è®¾ç½®Android NDKç¯å¢ƒï¼ˆä»…é™Androidå¹³å°ï¼‰
    - name: è®¾ç½®Android NDK
      if: matrix.target_os == 'android'
      uses: nttld/setup-ndk@v1
      with:
        ndk-version: r25c
        
    # è·å–Googleçš„depot_toolså·¥å…·é›†
    - name: è·å–depot_tools
      run: |
        git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git
        echo "${{ github.workspace }}/depot_tools" >> $GITHUB_PATH
      shell: bash
      
    # è®¾ç½®Windowsç³»ç»Ÿçš„depot_toolsç¯å¢ƒå˜é‡
    - name: è®¾ç½®depot_toolsç¯å¢ƒå˜é‡
      if: runner.os == 'Windows'
      run: |
        echo "${{ github.workspace }}\depot_tools" | Out-File -FilePath $env:GITHUB_PATH -Encoding utf8 -Append
        # ç¦ç”¨depot_toolsè‡ªåŠ¨ä¸‹è½½å·¥å…·é“¾
        echo "DEPOT_TOOLS_WIN_TOOLCHAIN=0" | Out-File -FilePath $env:GITHUB_ENV -Encoding utf8 -Append
        
    # è·å–Dawnæºä»£ç å¹¶åŒæ­¥ä¾èµ–
    - name: è·å–Dawnæºä»£ç 
      run: |
        git clone https://dawn.googlesource.com/dawn.git
        cd dawn
        cp scripts/standalone.gclient .gclient
        gclient sync
        echo "âœ… Dawnæºä»£ç è·å–å®Œæˆ"
      shell: bash
      
    # è·å–Skiaæºä»£ç å¹¶åŒæ­¥ä¾èµ–
    - name: è·å–Skiaæºä»£ç 
      run: |
        git clone https://skia.googlesource.com/skia.git
        cd skia
        python tools/git-sync-deps
        echo "âœ… Skiaæºä»£ç è·å–å®Œæˆ"
      shell: bash
      
    # é…ç½®Dawnæ„å»ºå‚æ•°
    - name: é…ç½®Dawnæ„å»ºå‚æ•°
      run: |
        cd dawn
        
        # åŸºç¡€æ„å»ºå‚æ•°è®¾ç½®
        args="is_debug=false"
        args="$args is_component_build=false"
        args="$args dawn_use_swiftshader=false"
        args="$args dawn_enable_d3d11=$([[ \"${{ matrix.dawn_backends }}\" == *\"d3d11\"* ]] && echo \"true\" || echo \"false\")"
        args="$args dawn_enable_d3d12=$([[ \"${{ matrix.dawn_backends }}\" == *\"d3d12\"* ]] && echo \"true\" || echo \"false\")"
        args="$args dawn_enable_metal=$([[ \"${{ matrix.dawn_backends }}\" == *\"metal\"* ]] && echo \"true\" || echo \"false\")"
        args="$args dawn_enable_vulkan=$([[ \"${{ matrix.dawn_backends }}\" == *\"vulkan\"* ]] && echo \"true\" || echo \"false\")"
        args="$args dawn_enable_desktop_gl=$([[ \"${{ matrix.dawn_backends }}\" == *\"opengl\"* ]] && echo \"true\" || echo \"false\")"
        args="$args dawn_enable_opengles=$([[ \"${{ matrix.dawn_backends }}\" == *\"opengl\"* ]] && echo \"true\" || echo \"false\")"
        
        # è®¾ç½®ç›®æ ‡å¹³å°å’Œæ¶æ„
        args="$args target_os=\"${{ matrix.target_os }}\""
        args="$args target_cpu=\"${{ matrix.target_cpu }}\""
        
        # Androidç‰¹å®šé…ç½®
        if [ "${{ matrix.target_os }}" = "android" ]; then
          args="$args android_api_level=${{ matrix.android_api }}"
          args="$args ndk_api_level_at_least=${{ matrix.android_api }}"
        fi
        
        echo "DAWN_BUILD_ARGS=$args" >> $GITHUB_ENV
        echo "âœ… Dawnæ„å»ºå‚æ•°é…ç½®å®Œæˆ: $args"
      shell: bash
      
    # é…ç½®Skiaæ„å»ºå‚æ•°
    - name: é…ç½®Skiaæ„å»ºå‚æ•°
      run: |
        cd skia
        
        # åŸºç¡€æ„å»ºå‚æ•°è®¾ç½®
        args="is_official_build=true"
        args="$args cc=\"clang\""
        args="$args cxx=\"clang++\""
        args="$args skia_use_system_expat=false"
        args="$args skia_use_system_icu=false"
        args="$args skia_use_system_libjpeg_turbo=false"
        args="$args skia_use_system_libpng=false"
        args="$args skia_use_system_libwebp=false"
        args="$args skia_use_system_zlib=false"
        
        # å¯ç”¨C++20æ”¯æŒ
        args="$args extra_cflags_cc=[\"-std=c++20\"]"
        
        # å¯ç”¨å…¨é‡åŠŸèƒ½æ”¯æŒ
        args="$args skia_enable_pdf=true"
        args="$args skia_enable_skottie=true"
        args="$args skia_enable_skshaper=true"
        args="$args skia_enable_svg=true"
        args="$args skia_use_icu=true"
        
        # å¯ç”¨GPUåç«¯æ”¯æŒï¼ŒåŒ…å«Dawn
        args="$args skia_enable_gpu=true"
        args="$args skia_use_gl=true"
        args="$args skia_use_vulkan=true"
        args="$args skia_enable_spirv_validation=false"
        args="$args skia_use_dawn=true"
        
        # å¯ç”¨Graphiteï¼ˆå®éªŒæ€§æ–°æ¸²æŸ“å¼•æ“ï¼‰
        args="$args skia_enable_graphite=true"
        
        # ç¦ç”¨å·¥å…·æ„å»º
        args="$args skia_enable_tools=false"
        
        # è®¾ç½®ç›®æ ‡å¹³å°å’Œæ¶æ„
        args="$args target_os=\"${{ matrix.target_os }}\""
        args="$args target_cpu=\"${{ matrix.target_cpu }}\""
        
        # æ ¹æ®ä¸åŒå¹³å°è®¾ç½®ç‰¹å®šå‚æ•°
        case "${{ matrix.target_os }}" in
          "win")
            # Windowså¹³å°ç‰¹å®šé…ç½®
            args="$args skia_use_angle=true"
            args="$args skia_use_direct3d=true"
            args="$args skia_use_freetype=true"
            args="$args skia_use_system_freetype2=false"
            args="$args skia_use_harfbuzz=true"
            args="$args skia_use_system_harfbuzz=false"
            args="$args extra_cflags=[\"/MD\"]"
            args="$args extra_cflags_c=[\"/MD\"]"
            args="$args extra_cflags_cc=[\"/MD\", \"-std=c++20\"]"
            ;;
          "mac")
            # macOSå¹³å°ç‰¹å®šé…ç½®
            args="$args skia_use_metal=true"
            args="$args skia_use_freetype=true"
            args="$args skia_use_system_freetype2=false"
            args="$args skia_use_fontconfig=false"
            args="$args skia_use_harfbuzz=true"
            args="$args skia_use_system_harfbuzz=false"
            ;;
          "linux")
            # Linuxå¹³å°ç‰¹å®šé…ç½®
            args="$args skia_use_x11=true"
            args="$args skia_use_freetype=true"
            args="$args skia_use_fontconfig=true"
            args="$args skia_use_harfbuzz=true"
            ;;
          "android")
            # Androidå¹³å°ç‰¹å®šé…ç½®
            args="$args ndk=\"$ANDROID_NDK_ROOT\""
            args="$args android_api_level=${{ matrix.android_api }}"
            args="$args skia_use_system_freetype2=false"
            args="$args skia_use_freetype=true"
            args="$args skia_enable_fontmgr_android=true"
            args="$args skia_use_harfbuzz=true"
            args="$args skia_use_system_harfbuzz=false"
            ;;
        esac
        
        echo "SKIA_BUILD_ARGS=$args" >> $GITHUB_ENV
        echo "âœ… Skiaæ„å»ºå‚æ•°é…ç½®å®Œæˆ"
      shell: bash
      
    # æ„å»ºDawn
    - name: æ„å»ºDawn
      run: |
        cd dawn
        echo "å¼€å§‹æ„å»º ${{ matrix.target_os }} å¹³å°çš„Dawn..."
        bin/gn gen out/Release --args="$DAWN_BUILD_ARGS"
        ninja -C out/Release -j4
        echo "âœ… ${{ matrix.target_os }} å¹³å°Dawnæ„å»ºå®Œæˆ"
      shell: bash
      
    # æ„å»ºSkia
    - name: æ„å»ºSkia
      run: |
        cd skia
        echo "å¼€å§‹æ„å»º ${{ matrix.target_os }} å¹³å°çš„Skia..."
        bin/gn gen out/Release --args="$SKIA_BUILD_ARGS"
        ninja -C out/Release -j4
        echo "âœ… ${{ matrix.target_os }} å¹³å°Skiaæ„å»ºå®Œæˆ"
      shell: bash
      
    # åˆ›å»ºå‘å¸ƒåŒ…å¹¶æ•´ç†æ–‡ä»¶
    - name: åˆ›å»ºSkia+Dawnå‘å¸ƒåŒ…
      run: |
        # åˆ›å»ºç¬¦åˆè¦æ±‚çš„ç›®å½•ç»“æ„
        mkdir -p Skia_Prebuilt/Skia/bin/${{ matrix.platform }}/${{ matrix.arch }}
        mkdir -p Skia_Prebuilt/Skia/lib/${{ matrix.platform }}/${{ matrix.arch }}
        mkdir -p Skia_Prebuilt/Skia/include
        mkdir -p Skia_Prebuilt/Skia/modules
        mkdir -p Skia_Prebuilt/Skia/examples
        mkdir -p Skia_Prebuilt/Skia/dawn/bin/${{ matrix.platform }}/${{ matrix.arch }}
        mkdir -p Skia_Prebuilt/Skia/dawn/lib/${{ matrix.platform }}/${{ matrix.arch }}
        mkdir -p Skia_Prebuilt/Skia/dawn/include
        
        # å¤åˆ¶Skiaå¤´æ–‡ä»¶
        cp -r skia/include/* Skia_Prebuilt/Skia/include/
        
        # å¤åˆ¶Skiaæ¨¡å—
        if [ -d "skia/modules" ]; then
          cp -r skia/modules/* Skia_Prebuilt/Skia/modules/
        fi
        
        # å¤åˆ¶Skiaç¤ºä¾‹èµ„æº
        if [ -d "skia/resources" ]; then
          cp -r skia/resources/* Skia_Prebuilt/Skia/examples/
        fi
        
        # å¤åˆ¶Dawnå¤´æ–‡ä»¶
        cp -r dawn/include/* Skia_Prebuilt/Skia/dawn/include/
        
        # æ ¹æ®å¹³å°å¤åˆ¶ç›¸åº”çš„åº“æ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶
        case "${{ matrix.target_os }}" in
          "win")
            # Skia Windowsæ–‡ä»¶
            find skia/out/Release -name "*.lib" -exec cp {} Skia_Prebuilt/Skia/lib/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            find skia/out/Release -name "*.dll" -exec cp {} Skia_Prebuilt/Skia/bin/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            # Dawn Windowsæ–‡ä»¶
            find dawn/out/Release -name "*.lib" -exec cp {} Skia_Prebuilt/Skia/dawn/lib/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            find dawn/out/Release -name "*.dll" -exec cp {} Skia_Prebuilt/Skia/dawn/bin/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            ;;
          "mac")
            # Skia macOSæ–‡ä»¶
            find skia/out/Release -name "*.a" -exec cp {} Skia_Prebuilt/Skia/lib/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            find skia/out/Release -name "*.dylib" -exec cp {} Skia_Prebuilt/Skia/lib/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            # Dawn macOSæ–‡ä»¶
            find dawn/out/Release -name "*.a" -exec cp {} Skia_Prebuilt/Skia/dawn/lib/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            find dawn/out/Release -name "*.dylib" -exec cp {} Skia_Prebuilt/Skia/dawn/lib/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            ;;
          "linux"|"android")
            # Skia Linux/Androidæ–‡ä»¶
            find skia/out/Release -name "*.a" -exec cp {} Skia_Prebuilt/Skia/lib/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            find skia/out/Release -name "*.so" -exec cp {} Skia_Prebuilt/Skia/lib/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            # Dawn Linux/Androidæ–‡ä»¶
            find dawn/out/Release -name "*.a" -exec cp {} Skia_Prebuilt/Skia/dawn/lib/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            find dawn/out/Release -name "*.so" -exec cp {} Skia_Prebuilt/Skia/dawn/lib/${{ matrix.platform }}/${{ matrix.arch }}/ \;
            ;;
        esac
        
        echo "âœ… ${{ matrix.platform }}/${{ matrix.arch }} æ–‡ä»¶æ•´ç†å®Œæˆ"
      shell: bash
      
    # ç”ŸæˆCMakeLists.txtæ–‡ä»¶
    - name: ç”ŸæˆCMakeLists.txt
      run: |
        cat > Skia_Prebuilt/Skia/CMakeLists.txt << 'EOF'
        # Skia + Dawn WebGPU å›¾å½¢åº“çš„CMakeé…ç½®æ–‡ä»¶ï¼ˆå…¨å¹³å°æ”¯æŒï¼‰
        cmake_minimum_required(VERSION 3.20)
        
        # è®¾ç½®é¡¹ç›®ä¿¡æ¯
        project(SkiaDawnPrebuilt
            VERSION 1.0.0
            DESCRIPTION "Skia + Dawn WebGPU é¢„ç¼–è¯‘å›¾å½¢åº“"
            LANGUAGES CXX C
        )
        
        # å¼ºåˆ¶è¦æ±‚C++20æ ‡å‡†
        set(CMAKE_CXX_STANDARD 20)
        set(CMAKE_CXX_STANDARD_REQUIRED ON)
        
        # è·å–å½“å‰ç›®å½•
        get_filename_component(SKIA_ROOT_DIR "${CMAKE_CURRENT_LIST_DIR}" ABSOLUTE)
        
        # æ£€æµ‹å½“å‰å¹³å°å’Œæ¶æ„
        if(WIN32)
            set(SKDN_PLATFORM "Win")
            if(CMAKE_SIZEOF_VOID_P EQUAL 8)
                set(SKDN_ARCH "x64")
            else()
                set(SKDN_ARCH "x86")
            endif()
        elseif(APPLE)
            set(SKDN_PLATFORM "Mac")
            if(CMAKE_OSX_ARCHITECTURES MATCHES "arm64" OR CMAKE_HOST_SYSTEM_PROCESSOR MATCHES "arm64")
                set(SKDN_ARCH "arm64")
            else()
                set(SKDN_ARCH "x64")
            endif()
        elseif(ANDROID)
            set(SKDN_PLATFORM "Android")
            if(ANDROID_ABI MATCHES "arm64-v8a")
                set(SKDN_ARCH "arm64")
            elseif(ANDROID_ABI MATCHES "x86_64")
                set(SKDN_ARCH "x64")
            else()
                message(FATAL_ERROR "ä¸æ”¯æŒçš„Androidæ¶æ„: ${ANDROID_ABI}")
            endif()
        else()
            set(SKDN_PLATFORM "Linux")
            if(CMAKE_SIZEOF_VOID_P EQUAL 8)
                set(SKDN_ARCH "x64")
            else()
                set(SKDN_ARCH "x86")
            endif()
        endif()
        
        message(STATUS "æ£€æµ‹åˆ°å¹³å°: ${SKDN_PLATFORM}/${SKDN_ARCH}")
        
        # è®¾ç½®åº“æ–‡ä»¶è·¯å¾„
        set(SKIA_LIB_DIR "${SKIA_ROOT_DIR}/lib/${SKDN_PLATFORM}/${SKDN_ARCH}")
        set(DAWN_LIB_DIR "${SKIA_ROOT_DIR}/dawn/lib/${SKDN_PLATFORM}/${SKDN_ARCH}")
        set(SKIA_BIN_DIR "${SKIA_ROOT_DIR}/bin/${SKDN_PLATFORM}/${SKDN_ARCH}")
        set(DAWN_BIN_DIR "${SKIA_ROOT_DIR}/dawn/bin/${SKDN_PLATFORM}/${SKDN_ARCH}")
        
        # éªŒè¯åº“æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨
        if(NOT EXISTS "${SKIA_LIB_DIR}")
            message(FATAL_ERROR "Skiaåº“æ–‡ä»¶ç›®å½•ä¸å­˜åœ¨: ${SKIA_LIB_DIR}")
        endif()
        
        if(NOT EXISTS "${DAWN_LIB_DIR}")
            message(FATAL_ERROR "Dawnåº“æ–‡ä»¶ç›®å½•ä¸å­˜åœ¨: ${DAWN_LIB_DIR}")
        endif()
        
        # åˆ›å»ºskdnæ¥å£åº“ï¼ˆSkia + Dawné›†æˆï¼‰
        add_library(skdn INTERFACE)
        add_library(skdn::skdn ALIAS skdn)
        
        # è®¾ç½®åŒ…å«ç›®å½•
        target_include_directories(skdn INTERFACE
            $<BUILD_INTERFACE:${SKIA_ROOT_DIR}/include>
            $<BUILD_INTERFACE:${SKIA_ROOT_DIR}/modules>
            $<BUILD_INTERFACE:${SKIA_ROOT_DIR}/dawn/include>
            $<INSTALL_INTERFACE:include>
            $<INSTALL_INTERFACE:modules>
            $<INSTALL_INTERFACE:dawn/include>
        )
        
        # æŸ¥æ‰¾æ‰€æœ‰åº“æ–‡ä»¶
        file(GLOB SKIA_LIBRARIES "${SKIA_LIB_DIR}/*")
        file(GLOB DAWN_LIBRARIES "${DAWN_LIB_DIR}/*")
        
        # è®¾ç½®C++20ç¼–è¯‘ç‰¹æ€§
        target_compile_features(skdn INTERFACE cxx_std_20)
        
        # æ ¹æ®å¹³å°è®¾ç½®ç‰¹å®šçš„é…ç½®
        if(WIN32)
            # Windowså¹³å°é…ç½®
            target_compile_definitions(skdn INTERFACE
                # Skiaå®šä¹‰
                SK_GANESH=1
                SK_GRAPHITE=1
                SK_DAWN=1
                SK_VULKAN=1
                SK_GL=1
                SK_BUILD_FOR_WIN=1
                SK_ENABLE_SKOTTIE=1
                SK_ENABLE_SVG=1
                # Dawnå®šä¹‰
                DAWN_ENABLE_D3D11=1
                DAWN_ENABLE_D3D12=1
                DAWN_ENABLE_VULKAN=1
                # ç³»ç»Ÿå®šä¹‰
                UNICODE
                _UNICODE
                WIN32_LEAN_AND_MEAN
                NOMINMAX
            )
            
            # è®¾ç½®Windowsè¿è¡Œæ—¶ä¸º/MDï¼ˆå¤šçº¿ç¨‹DLLï¼‰
            target_compile_options(skdn INTERFACE
                $<$<CONFIG:Debug>:/MDd>
                $<$<CONFIG:Release>:/MD>
                $<$<CONFIG:RelWithDebInfo>:/MD>
                $<$<CONFIG:MinSizeRel>:/MD>
            )
            
            # æ·»åŠ Windowsç³»ç»Ÿåº“
            target_link_libraries(skdn INTERFACE
                ${SKIA_LIBRARIES}
                ${DAWN_LIBRARIES}
                # DirectXç›¸å…³
                d3d11 d3d12 dxgi d3dcompiler dxguid
                # OpenGLç›¸å…³
                OpenGL32
                # ç³»ç»Ÿåº“
                Gdi32 User32 Kernel32 Ole32 OleAut32 Uuid
                Advapi32 Shell32 Ws2_32 Usp10
            )
            
        elseif(APPLE)
            # macOSå¹³å°é…ç½®
            target_compile_definitions(skdn INTERFACE
                # Skiaå®šä¹‰
                SK_GANESH=1
                SK_GRAPHITE=1
                SK_DAWN=1
                SK_METAL=1
                SK_GL=1
                SK_VULKAN=1
                SK_BUILD_FOR_MAC=1
                SK_ENABLE_SKOTTIE=1
                SK_ENABLE_SVG=1
                # Dawnå®šä¹‰
                DAWN_ENABLE_METAL=1
            )
            
            # æŸ¥æ‰¾macOSç³»ç»Ÿæ¡†æ¶
            find_library(FOUNDATION_FRAMEWORK Foundation REQUIRED)
            find_library(COREGRAPHICS_FRAMEWORK CoreGraphics REQUIRED)
            find_library(CORETEXT_FRAMEWORK CoreText REQUIRED)
            find_library(COREFOUNDATION_FRAMEWORK CoreFoundation REQUIRED)
            find_library(COCOA_FRAMEWORK Cocoa REQUIRED)
            find_library(METAL_FRAMEWORK Metal REQUIRED)
            find_library(METALKIT_FRAMEWORK MetalKit REQUIRED)
            find_library(OPENGL_FRAMEWORK OpenGL REQUIRED)
            find_library(QUARTZCORE_FRAMEWORK QuartzCore REQUIRED)
            find_library(IOSURFACE_FRAMEWORK IOSurface REQUIRED)
            
            target_link_libraries(skdn INTERFACE
                ${SKIA_LIBRARIES}
                ${DAWN_LIBRARIES}
                ${FOUNDATION_FRAMEWORK}
                ${COREGRAPHICS_FRAMEWORK}
                ${CORETEXT_FRAMEWORK}
                ${COREFOUNDATION_FRAMEWORK}
                ${COCOA_FRAMEWORK}
                ${METAL_FRAMEWORK}
                ${METALKIT_FRAMEWORK}
                ${OPENGL_FRAMEWORK}
                ${QUARTZCORE_FRAMEWORK}
                ${IOSURFACE_FRAMEWORK}
            )
            
        elseif(ANDROID)
            # Androidå¹³å°é…ç½®
            target_compile_definitions(skdn INTERFACE
                # Androidå®šä¹‰
                ANDROID
                __ANDROID_API__=21
                # Skiaå®šä¹‰
                SK_GANESH=1
                SK_GRAPHITE=1
                SK_DAWN=1
                SK_VULKAN=1
                SK_GL=1
                SK_BUILD_FOR_ANDROID=1
                SK_ENABLE_SKOTTIE=1
                SK_ENABLE_SVG=1
                # Dawnå®šä¹‰
                DAWN_ENABLE_VULKAN=1
                DAWN_ENABLE_OPENGLES=1
            )
            
            target_compile_options(skdn INTERFACE
                -fPIC
                -fno-rtti
                -fno-exceptions
            )
            
            target_link_libraries(skdn INTERFACE
                ${SKIA_LIBRARIES}
                ${DAWN_LIBRARIES}
                # OpenGL ESç›¸å…³
                GLESv2 EGL
                # Vulkanç›¸å…³
                vulkan
                # Androidç³»ç»Ÿåº“
                android log jnigraphics mediandk
                # ç³»ç»Ÿåº“
                dl m z
            )
            
        else()
            # Linuxå¹³å°é…ç½®
            target_compile_definitions(skdn INTERFACE
                # Skiaå®šä¹‰
                SK_GANESH=1
                SK_GRAPHITE=1
                SK_DAWN=1
                SK_VULKAN=1
                SK_GL=1
                SK_BUILD_FOR_UNIX=1
                SK_ENABLE_SKOTTIE=1
                SK_ENABLE_SVG=1
                # Dawnå®šä¹‰
                DAWN_ENABLE_VULKAN=1
                DAWN_ENABLE_DESKTOP_GL=1
            )
            
            # æŸ¥æ‰¾å¿…è¦çš„ç³»ç»Ÿåº“
            find_package(PkgConfig QUIET)
            if(PKG_CONFIG_FOUND)
                pkg_check_modules(FONTCONFIG QUIET fontconfig)
                pkg_check_modules(HARFBUZZ QUIET harfbuzz)
            endif()
            
            # æŸ¥æ‰¾Vulkan
            find_package(Vulkan QUIET)
            
            # æŸ¥æ‰¾X11ç›¸å…³åº“
            find_package(X11 QUIET)
            
            target_link_libraries(skdn INTERFACE
                ${SKIA_LIBRARIES}
                ${DAWN_LIBRARIES}
                # OpenGL
                GL
                # ç³»ç»Ÿåº“
                pthread dl m
            )
            
            # FontConfigæ”¯æŒ
            if(FONTCONFIG_FOUND)
                target_link_libraries(skdn INTERFACE ${FONTCONFIG_LIBRARIES})
                target_include_directories(skdn INTERFACE ${FONTCONFIG_INCLUDE_DIRS})
            endif()
            
            # HarfBuzzæ”¯æŒ
            if(HARFBUZZ_FOUND)
                target_link_libraries(skdn INTERFACE ${HARFBUZZ_LIBRARIES})
                target_include_directories(skdn INTERFACE ${HARFBUZZ_INCLUDE_DIRS})
            endif()
            
            # æ·»åŠ Vulkanæ”¯æŒ
            if(Vulkan_FOUND)
                target_link_libraries(skdn INTERFACE ${Vulkan_LIBRARIES})
                target_include_directories(skdn INTERFACE ${Vulkan_INCLUDE_DIRS})
            endif()
            
            # æ·»åŠ X11æ”¯æŒ
            if(X11_FOUND)
                target_link_libraries(skdn INTERFACE
                    ${X11_LIBRARIES}
                    ${X11_Xrandr_LIB}
                    ${X11_Xinerama_LIB}
                    ${X11_Xcursor_LIB}
                    ${X11_Xi_LIB}
                )
                target_include_directories(skdn INTERFACE ${X11_INCLUDE_DIR})
            endif()
        endif()
        
        # è®¾ç½®ç¼–è¯‘é€‰é¡¹
        target_compile_options(skdn INTERFACE
            $<$<CONFIG:Debug>:-g -O0>
            $<$<CONFIG:Release>:-O3 -DNDEBUG>
            $<$<CONFIG:RelWithDebInfo>:-O2 -g -DNDEBUG>
        )
        
        # è®¾ç½®é¢„å¤„ç†å™¨å®šä¹‰
        target_compile_definitions(skdn INTERFACE
            $<$<CONFIG:Debug>:SK_DEBUG>
            $<$<CONFIG:Release>:SK_RELEASE>
        )
        
        # æä¾›æŸ¥æ‰¾è„šæœ¬ä½ç½®ä¿¡æ¯
        message(STATUS "Skia + Dawn å›¾å½¢åº“é…ç½®å®Œæˆ")
        message(STATUS "  - å¹³å°: ${SKDN_PLATFORM}/${SKDN_ARCH}")
        message(STATUS "  - Skiaåº“ç›®å½•: ${SKIA_LIB_DIR}")
        message(STATUS "  - Dawnåº“ç›®å½•: ${DAWN_LIB_DIR}")
        message(STATUS "  - ä½¿ç”¨æ–¹æ³•: target_link_libraries(your_target skdn::skdn)")
        EOF
        
        echo "âœ… CMakeLists.txtç”Ÿæˆå®Œæˆ"
      shell: bash
      
    # æ‰“åŒ…æ„å»ºäº§ç‰©
    - name: æ‰“åŒ…Skia+Dawnæ„å»ºäº§ç‰©
      run: |
        # è¿›å…¥åŒ…å«Skia_Prebuiltçš„ç›®å½•
        cd Skia_Prebuilt
        
        # æ ¹æ®è¿è¡Œå¹³å°é€‰æ‹©åˆé€‚çš„æ‰“åŒ…æ–¹å¼
        if [ "${{ runner.os }}" = "Windows" ]; then
          # Windowsç³»ç»Ÿä½¿ç”¨PowerShellçš„Compress-Archive
          powershell "Compress-Archive -Path * -DestinationPath ../Skia_Prebuilt_${{ matrix.platform }}_${{ matrix.arch }}.zip"
        else
          # Unixç³»ç»Ÿä½¿ç”¨zipå‘½ä»¤æ‰“åŒ…
          zip -r "../Skia_Prebuilt_${{ matrix.platform }}_${{ matrix.arch }}.zip" *
        fi
        
        echo "âœ… Skia_Prebuilt_${{ matrix.platform }}_${{ matrix.arch }}.zip æ„å»ºåŒ…åˆ›å»ºå®Œæˆ"
      shell: bash
      
    # ä¸Šä¼ æ„å»ºäº§ç‰©
    - name: ä¸Šä¼ æ„å»ºäº§ç‰©
      uses: actions/upload-artifact@v4
      with:
        name: Skia_Prebuilt_${{ matrix.platform }}_${{ matrix.arch }}
        path: Skia_Prebuilt_${{ matrix.platform }}_${{ matrix.arch }}.zip
        retention-days: 30
        compression-level: 0
        
  # åˆå¹¶æ‰€æœ‰å¹³å°çš„æ„å»ºåŒ…
  create-combined-package:
    needs: build-skia-dawn
    runs-on: ubuntu-latest
    
    steps:
    # æ£€å‡ºä»£ç 
    - name: æ£€å‡ºä»£ç ä»“åº“
      uses: actions/checkout@v4
      
    # ä¸‹è½½æ‰€æœ‰æ„å»ºäº§ç‰©
    - name: ä¸‹è½½æ‰€æœ‰æ„å»ºäº§ç‰©
      uses: actions/download-artifact@v4
      with:
        path: artifacts
        
    # åˆ›å»ºæœ€ç»ˆçš„åˆå¹¶åŒ…
    - name: åˆ›å»ºæœ€ç»ˆSkia+Dawnåˆå¹¶åŒ…
      run: |
        # åˆ›å»ºåŸºç¡€ç›®å½•ç»“æ„
        mkdir -p Skia_Prebuilt/Skia/bin
        mkdir -p Skia_Prebuilt/Skia/lib  
        mkdir -p Skia_Prebuilt/Skia/include
        mkdir -p Skia_Prebuilt/Skia/modules
        mkdir -p Skia_Prebuilt/Skia/examples
        mkdir -p Skia_Prebuilt/Skia/dawn/bin
        mkdir -p Skia_Prebuilt/Skia/dawn/lib
        mkdir -p Skia_Prebuilt/Skia/dawn/include
        
        # è§£å‹æ‰€æœ‰æ„å»ºäº§ç‰©å¹¶åˆå¹¶
        for artifact_dir in artifacts/*/; do
          echo "å¤„ç†æ„å»ºäº§ç‰©: $artifact_dir"
          cd "$artifact_dir"
          
          # è§£å‹zipæ–‡ä»¶
          for zip_file in *.zip; do
            if [ -f "$zip_file" ]; then
              echo "è§£å‹: $zip_file"
              unzip -o "$zip_file"
              
              # å¤åˆ¶åˆ°æœ€ç»ˆç›®å½•ç»“æ„
              if [ -d "Skia" ]; then
                # åˆå¹¶ç›®å½•ç»“æ„
                cp -r Skia/* ../../Skia_Prebuilt/Skia/ 2>/dev/null || true
              fi
            fi
          done
          
          cd - >/dev/null
        done
        
        # ç”Ÿæˆæœ€ç»ˆçš„CMakeLists.txtï¼ˆç¡®ä¿æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼‰
        cp artifacts/*/Skia_Prebuilt_*/Skia/CMakeLists.txt Skia_Prebuilt/Skia/ 2>/dev/null || true
        
        # åˆ›å»ºæ„å»ºä¿¡æ¯æ–‡ä»¶
        cat > Skia_Prebuilt/Skia/BUILD_INFO.txt << EOF
        Skia + Dawn WebGPU å…¨å¹³å°æ„å»ºåŒ…
        ================================
        
        æ„å»ºæ—¥æœŸ: $(date '+%Y-%m-%d %H:%M:%S UTC')
        ç‰ˆæœ¬ä¿¡æ¯: Skia + Dawn WebGPU å®Œæ•´é›†æˆç‰ˆæœ¬
        
        æ”¯æŒçš„å¹³å°å’Œæ¶æ„:
        - Windows x64 (Direct3D 11/12 + Vulkan + OpenGL)
        - macOS x64/ARM64 (Metal)  
        - Linux x64 (Vulkan + OpenGL)
        - Android x64/ARM64 (Vulkan + OpenGL ES)
        
        ä¸»è¦ç‰¹æ€§:
        - Skia 2Då›¾å½¢åº“å®Œæ•´åŠŸèƒ½
        - Dawn WebGPUæ¸²æŸ“åç«¯
        - Graphiteå®éªŒæ€§æ¸²æŸ“å¼•æ“
        - å¤šå¹³å°GPUåŠ é€Ÿ
        - C++20æ ‡å‡†æ”¯æŒ
        - CMakeé›†æˆåº“ (skdn::skdn)
        
        ä½¿ç”¨æ–¹æ³•:
        1. å°†åŒ…è§£å‹åˆ°é¡¹ç›®ç›®å½•
        2. åœ¨CMakeLists.txtä¸­æ·»åŠ :
           add_subdirectory(path/to/Skia_Prebuilt/Skia)
           target_link_libraries(your_target skdn::skdn)
        3. åŒ…å«å¤´æ–‡ä»¶: #include <include/core/SkCanvas.h>
        
        æ³¨æ„äº‹é¡¹:
        - è¦æ±‚CMake 3.20+
        - è¦æ±‚C++20ç¼–è¯‘å™¨æ”¯æŒ
        - è‡ªåŠ¨æ£€æµ‹å¹³å°å’Œæ¶æ„
        - åŒ…å«æ‰€æœ‰å¿…è¦çš„ç³»ç»Ÿåº“é“¾æ¥
        EOF
        
        echo "âœ… æœ€ç»ˆåˆå¹¶åŒ…åˆ›å»ºå®Œæˆ"
        
    # æ‰“åŒ…æœ€ç»ˆç‰ˆæœ¬
    - name: æ‰“åŒ…æœ€ç»ˆç‰ˆæœ¬
      run: |
        zip -r "Skia_Prebuilt.zip" Skia_Prebuilt/
        echo "âœ… Skia_Prebuilt.zip æœ€ç»ˆç‰ˆæœ¬åˆ›å»ºå®Œæˆ"
        
    # ä¸Šä¼ æœ€ç»ˆæ„å»ºåŒ…
    - name: ä¸Šä¼ æœ€ç»ˆæ„å»ºåŒ…
      uses: actions/upload-artifact@v4
      with:
        name: Skia_Prebuilt_Final
        path: Skia_Prebuilt.zip
        retention-days: 90
        compression-level: 0
        
  # åˆ›å»ºGitHub Releaseå‘å¸ƒ
  create-release:
    needs: create-combined-package
    runs-on: ubuntu-latest
    if: |
      (github.event_name == 'push' && (github.ref == 'refs/heads/main' || github.ref == 'refs/heads/master')) ||
      github.event_name == 'schedule' ||
      github.event_name == 'workflow_dispatch'
    
    permissions:
      contents: write
      packages: write
    
    steps:
    # æ£€å‡ºä»£ç 
    - name: æ£€å‡ºä»£ç ä»“åº“
      uses: actions/checkout@v4
      
    # ä¸‹è½½æœ€ç»ˆæ„å»ºåŒ…
    - name: ä¸‹è½½æœ€ç»ˆæ„å»ºåŒ…
      uses: actions/download-artifact@v4
      with:
        name: Skia_Prebuilt_Final
        path: release
        
    # è·å–å‘å¸ƒæ ‡ç­¾
    - name: è·å–å‘å¸ƒæ ‡ç­¾
      id: get_tag
      run: |
        if [ "${{ github.event_name }}" = "schedule" ]; then
          echo "tag=skia-dawn-daily-$(date +%Y%m%d)" >> $GITHUB_OUTPUT
          echo "name=Skia+Dawn WebGPU æ¯æ—¥æ„å»ºåŒ… $(date +%Y-%m-%d)" >> $GITHUB_OUTPUT
        else
          echo "tag=skia-dawn-build-${{ github.run_number }}" >> $GITHUB_OUTPUT
          echo "name=Skia+Dawn WebGPU æ„å»ºåŒ… v${{ github.run_number }}" >> $GITHUB_OUTPUT
        fi
        
    # åˆ›å»ºGitHub Release
    - name: åˆ›å»ºGitHub Release
      uses: softprops/action-gh-release@v2
      with:
        tag_name: ${{ steps.get_tag.outputs.tag }}
        name: ${{ steps.get_tag.outputs.name }}
        body: |
          # Skia + Dawn WebGPU å…¨å¹³å°æ„å»ºåŒ…
          
          è¿™æ˜¯ä¸€ä¸ªåŒ…å« Skia 2Då›¾å½¢åº“å’Œ Dawn WebGPU åç«¯çš„å®Œæ•´é¢„ç¼–è¯‘åŒ…ï¼Œæ”¯æŒå…¨å¹³å°éƒ¨ç½²ã€‚
          
          ## ğŸ“¦ åŒ…å«å†…å®¹
          
          **Skia_Prebuilt.zip** - å®Œæ•´çš„ Skia + Dawn æ„å»ºåŒ…ï¼ŒåŒ…å«ï¼š
          
          ### ğŸ—ï¸ ç›®å½•ç»“æ„
          ```
          Skia/
          â”œâ”€â”€ bin/                    # å¯æ‰§è¡Œæ–‡ä»¶å’ŒDLL
          â”‚   â”œâ”€â”€ Win/x64/
          â”‚   â”œâ”€â”€ Mac/x64/ 
          â”‚   â”œâ”€â”€ Mac/arm64/
          â”‚   â”œâ”€â”€ Linux/x64/
          â”‚   â””â”€â”€ Android/{x64,arm64}/
          â”œâ”€â”€ lib/                    # é™æ€å’ŒåŠ¨æ€åº“æ–‡ä»¶
          â”‚   â”œâ”€â”€ Win/x64/
          â”‚   â”œâ”€â”€ Mac/{x64,arm64}/
          â”‚   â”œâ”€â”€ Linux/x64/
          â”‚   â””â”€â”€ Android/{x64,arm64}/
          â”œâ”€â”€ include/                # Skiaå¤´æ–‡ä»¶
          â”œâ”€â”€ modules/                # Skiaæ¨¡å—
          â”œâ”€â”€ examples/               # ç¤ºä¾‹èµ„æº
          â”œâ”€â”€ dawn/                   # Dawn WebGPU
          â”‚   â”œâ”€â”€ bin/                # Dawnå¯æ‰§è¡Œæ–‡ä»¶
          â”‚   â”œâ”€â”€ lib/                # Dawnåº“æ–‡ä»¶
          â”‚   â””â”€â”€ include/            # Dawnå¤´æ–‡ä»¶
          â””â”€â”€ CMakeLists.txt          # CMakeé…ç½®æ–‡ä»¶
          ```
          
          ### ğŸ¯ æ”¯æŒçš„å¹³å°
          
          | å¹³å° | æ¶æ„ | GPUåç«¯ |
          |------|------|---------|
          | **Windows** | x64 | DirectX 11/12 + Vulkan + OpenGL |
          | **macOS** | x64, ARM64 | Metal |
          | **Linux** | x64 | Vulkan + OpenGL |
          | **Android** | x64, ARM64 | Vulkan + OpenGL ES |
          
          ### âœ¨ ä¸»è¦ç‰¹æ€§
          
          - ğŸ¨ **å®Œæ•´çš„ Skia 2D å›¾å½¢åŠŸèƒ½**
          - ğŸŒ **Dawn WebGPU æ¸²æŸ“åç«¯é›†æˆ**
          - âš¡ **Graphite å®éªŒæ€§æ¸²æŸ“å¼•æ“**
          - ğŸƒ **å¤šå¹³å° GPU åŠ é€Ÿæ¸²æŸ“**
          - ğŸ”§ **C++20 æ ‡å‡†æ”¯æŒ**
          - ğŸ“¦ **å•ä¸€ CMake æ¥å£åº“ (skdn::skdn)**
          - ğŸ­ **Skottie åŠ¨ç”»æ”¯æŒ**
          - ğŸ“„ **PDF/SVG å®Œæ•´æ”¯æŒ**
          
          ## ğŸš€ å¿«é€Ÿå¼€å§‹
          
          ### 1. ä¸‹è½½å’Œè§£å‹
          ```bash
          # ä¸‹è½½ Skia_Prebuilt.zip
          # è§£å‹åˆ°ä½ çš„é¡¹ç›®ç›®å½•
          ```
          
          ### 2. CMake é…ç½®
          ```cmake
          cmake_minimum_required(VERSION 3.20)
          project(MyApp)
          
          # è®¾ç½®C++20æ ‡å‡†
          set(CMAKE_CXX_STANDARD 20)
          set(CMAKE_CXX_STANDARD_REQUIRED ON)
          
          # æ·»åŠ Skia+Dawnåº“
          add_subdirectory(path/to/Skia_Prebuilt/Skia)
          
          # åˆ›å»ºä½ çš„åº”ç”¨
          add_executable(MyApp main.cpp)
          target_link_libraries(MyApp skdn::skdn)
          ```
          
          ### 3. ç¤ºä¾‹ä»£ç 
          ```cpp
          #include <include/core/SkCanvas.h>
          #include <include/core/SkSurface.h>
          #include <include/gpu/GrDirectContext.h>
          #include <webgpu/webgpu_cpp.h>
          
          int main() {
              // ä½¿ç”¨Skiaç»˜åˆ¶
              auto surface = SkSurface::MakeRasterN32Premul(800, 600);
              auto canvas = surface->getCanvas();
              
              // ç»˜åˆ¶æ“ä½œ...
              canvas->clear(SK_ColorWHITE);
              
              // Dawn WebGPUé›†æˆ
              // ...
              
              return 0;
          }
          ```
          
          ## ğŸ“‹ ç³»ç»Ÿè¦æ±‚
          
          - **CMake**: 3.20 æˆ–æ›´é«˜ç‰ˆæœ¬
          - **ç¼–è¯‘å™¨**: æ”¯æŒ C++20 çš„ç°ä»£ç¼–è¯‘å™¨
            - MSVC 2019 16.11+ (Windows)
            - Clang 12+ (macOS/Linux)  
            - GCC 11+ (Linux)
          - **å¹³å°ç‰¹å®š**:
            - Windows: Visual Studio 2019+
            - macOS: Xcode 13+
            - Linux: ç°ä»£å‘è¡Œç‰ˆ
            - Android: NDK r25c+
          
          ## ğŸ”§ æŠ€æœ¯ç»†èŠ‚
          
          - **å¹¶è¡Œç¼–è¯‘**: ä½¿ç”¨å¤šçº¿ç¨‹åŠ é€Ÿæ„å»º
          - **é™æ€é“¾æ¥**: æ‰€æœ‰ä¾èµ–éƒ½å·²é™æ€é“¾æ¥
          - **è‡ªåŠ¨æ£€æµ‹**: CMakeè‡ªåŠ¨æ£€æµ‹å¹³å°å’Œæ¶æ„
          - **å®Œæ•´åŠŸèƒ½**: å¯ç”¨æ‰€æœ‰Skiaå’ŒDawnç‰¹æ€§
          - **ç”Ÿäº§å°±ç»ª**: ä¼˜åŒ–çš„Releaseæ„å»º
          
          ## ğŸ“š æ–‡æ¡£å’Œæ”¯æŒ
          
          - Skia å®˜æ–¹æ–‡æ¡£: https://skia.org/
          - Dawn å®˜æ–¹æ–‡æ¡£: https://dawn.googlesource.com/dawn
          - WebGPU è§„èŒƒ: https://www.w3.org/TR/webgpu/
          
          ---
          
          ğŸ‰ **ç°åœ¨å°±å¼€å§‹ä½ çš„è·¨å¹³å°å›¾å½¢åº”ç”¨å¼€å‘ä¹‹æ—…å§ï¼**
        files: |
          release/Skia_Prebuilt.zip
        draft: false
        prerelease: false
        generate_release_notes: false
        make_latest: true
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
